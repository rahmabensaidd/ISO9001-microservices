<form class="p-4 pt-3" (ngSubmit)="createProject()" #projectForm="ngForm">
  <!-- Project Name -->
  <div class="form-group mb-3">
    <label for="projectName" class="form-label">Project Name :</label>
    <input
      type="text"
      class="form-control"
      id="projectName"
      [(ngModel)]="project.name"
      name="name"
      placeholder="Enter project name"
      required
      #projectName="ngModel"
    />
    <!-- Validation message -->
    <div *ngIf="projectName.touched && projectName.invalid" class="text-danger">
      Project name is required.
    </div>
  </div>

  <!-- Description -->
  <div class="form-group mb-3">
    <label for="description" class="form-label">Description :</label>
    <textarea
      class="form-control"
      id="description"
      [(ngModel)]="project.description"
      name="description"
      placeholder="Enter project description (max 500 characters)"
      rows="4"
      maxlength="500"
      required
      #description="ngModel"
    ></textarea>
    <div *ngIf="description.touched && description.invalid" class="text-danger">
      Description is required.
    </div>
    <div class="d-flex justify-content-between mt-1">
      <small class="text-muted" *ngIf="project.description?.length === 500" style="color: #dc3545 !important;">
        Maximum length reached (500/500)
      </small>
      <small class="text-muted" *ngIf="project.description?.length !== 500">
        {{project.description?.length || 0}}/500 characters
      </small>
    </div>
  </div>

  <!-- Start Date -->
  <div class="form-group mb-3">
    <label class="form-label small mb-1">Start Date</label>
    <input
      type="text"
      class="form-control"
      name="start_Date"
      [(ngModel)]="project.start_Date"
      appDatepicker
      required
      #startDate="ngModel"
    />
    <div *ngIf="startDate.touched && startDate.invalid" class="text-danger">
      Start date is required.
    </div>
  </div>

  <!-- Process Selection -->
  <div class="form-group mb-3">
    <label class="form-label">Select Processes :</label>
    <ng-select
      [items]="processList"
      bindLabel="procName"
      bindValue="id"
      [(ngModel)]="selectedProcesses"
      name="selectedProcesses"
      [multiple]="true"
      placeholder="Select processes"
      class="custom-multiselect shadow-sm"
      required
      #processes="ngModel"
    >
    </ng-select>
    <div *ngIf="processes.touched && processes.invalid" class="text-danger">
      At least one process must be selected.
    </div>
  </div>

  <!-- Project Type -->
  <div class="form-group mb-3">
    <label class="form-label">Project Type :</label>
    <ng-select
      [items]="projectTypes"
      bindLabel="label"
      bindValue="value"
      [(ngModel)]="project.projectType"
      name="projectType"
      placeholder="Select project type"
      class="custom-multiselect shadow-sm"
      required
      #projectType="ngModel"
    >
    </ng-select>
    <div *ngIf="projectType.touched && projectType.invalid" class="text-danger">
      Project type is required.
    </div>
  </div>

  <!-- Requirements -->
  <div class="form-group mb-3">
    <label class="form-label">Requirements :</label>
    <ng-select
      [items]="requirementOptions"
      bindLabel="label"
      bindValue="value"
      [(ngModel)]="project.requirements"
      name="requirements"
      [multiple]="true"
      placeholder="Select requirements"
      class="custom-multiselect shadow-sm"
      required
      #requirements="ngModel"
    >
    </ng-select>
    <div *ngIf="requirements.touched && requirements.invalid" class="text-danger">
      At least one requirement must be selected.
    </div>
  </div>

  <!-- Buttons -->
  <div class="form-group d-flex gap-2">
    <button type="submit" class="btn btn-create" [disabled]="projectForm.invalid">Create Project</button>
    <button type="button" class="btn btn-danger">Cancel</button>
  </div>
</form>
