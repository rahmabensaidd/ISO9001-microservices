import{Ba as Se,E as ee,La as xe,Pa as Oe,a as Q,f as Z,la as we,ma as Me,mb as te,qa as ye,t as Ce,wb as De,xb as ke}from"./chunk-PCQXBAHX.js";import{e as $,g as yt}from"./chunk-O7S4L63H.js";var $e=$((Jt,Ie)=>{"use strict";Ie.exports=function(n,r){return Array.prototype.slice.call(n,r)}});var Ne=$((Qt,Re)=>{"use strict";var St=typeof setImmediate=="function",re;St?re=function(t){setImmediate(t)}:re=function(t){setTimeout(t,0)};Re.exports=re});var Ye=$((Zt,Xe)=>{"use strict";var xt=Ne();Xe.exports=function(n,r,e){n&&xt(function(){n.apply(e||null,r||[])})}});var Be=$((er,je)=>{"use strict";var Fe=$e(),Ot=Ye();je.exports=function(n,r){var e=r||{},o={};return n===void 0&&(n={}),n.on=function(a,s){return o[a]?o[a].push(s):o[a]=[s],n},n.once=function(a,s){return s._once=!0,n.on(a,s),n},n.off=function(a,s){var u=arguments.length;if(u===1)delete o[a];else if(u===0)o={};else{var h=o[a];if(!h)return n;h.splice(h.indexOf(s),1)}return n},n.emit=function(){var a=Fe(arguments);return n.emitterSnapshot(a.shift()).apply(this,a)},n.emitterSnapshot=function(a){var s=(o[a]||[]).slice(0);return function(){var u=Fe(arguments),h=this||n;if(a==="error"&&e.throws!==!1&&!s.length)throw u.length===1?u[0]:u;return s.forEach(function(g){e.async?Ot(g,u,h):g.apply(h,u),g._once&&n.off(a,g)}),n}},n}});var _e=$((tr,Ae)=>{"use strict";var Pe=global.CustomEvent;function Dt(){try{var t=new Pe("cat",{detail:{foo:"bar"}});return t.type==="cat"&&t.detail.foo==="bar"}catch{}return!1}Ae.exports=Dt()?Pe:typeof document<"u"&&typeof document.createEvent=="function"?function(n,r){var e=document.createEvent("CustomEvent");return r?e.initCustomEvent(n,r.bubbles,r.cancelable,r.detail):e.initCustomEvent(n,!1,!1,void 0),e}:function(n,r){var e=document.createEventObject();return e.type=n,r?(e.bubbles=!!r.bubbles,e.cancelable=!!r.cancelable,e.detail=r.detail):(e.bubbles=!1,e.cancelable=!1,e.detail=void 0),e}});var Ve=$((rr,Te)=>{"use strict";var qe=[],ne="",kt=/^on/;for(ne in global)kt.test(ne)&&qe.push(ne.slice(2));Te.exports=qe});var Ke=$((nr,ze)=>{"use strict";var It=_e(),$t=Ve(),G=global.document,Ge=Rt,He=Xt,_=[];global.addEventListener||(Ge=Nt,He=Yt);ze.exports={add:Ge,remove:He,fabricate:Ft};function Rt(t,n,r,e){return t.addEventListener(n,r,e)}function Nt(t,n,r){return t.attachEvent("on"+n,Bt(t,n,r))}function Xt(t,n,r,e){return t.removeEventListener(n,r,e)}function Yt(t,n,r){var e=Le(t,n,r);if(e)return t.detachEvent("on"+n,e)}function Ft(t,n,r){var e=$t.indexOf(n)===-1?a():o();t.dispatchEvent?t.dispatchEvent(e):t.fireEvent("on"+n,e);function o(){var s;return G.createEvent?(s=G.createEvent("Event"),s.initEvent(n,!0,!0)):G.createEventObject&&(s=G.createEventObject()),s}function a(){return new It(n,{detail:r})}}function jt(t,n,r){return function(o){var a=o||global.event;a.target=a.target||a.srcElement,a.preventDefault=a.preventDefault||function(){a.returnValue=!1},a.stopPropagation=a.stopPropagation||function(){a.cancelBubble=!0},a.which=a.which||a.keyCode,r.call(t,a)}}function Bt(t,n,r){var e=Le(t,n,r)||jt(t,n,r);return _.push({wrapper:e,element:t,type:n,fn:r}),e}function Le(t,n,r){var e=Pt(t,n,r);if(e){var o=_[e].wrapper;return _.splice(e,1),o}}function Pt(t,n,r){var e,o;for(e=0;e<_.length;e++)if(o=_[e],o.element===t&&o.type===n&&o.fn===r)return e}});var Qe=$((ir,Je)=>{"use strict";var Ue={},At="(?:^|\\s)",_t="(?:\\s|$)";function We(t){var n=Ue[t];return n?n.lastIndex=0:Ue[t]=n=new RegExp(At+t+_t,"g"),n}function qt(t,n){var r=t.className;r.length?We(n).test(r)||(t.className+=" "+n):t.className=n}function Tt(t,n){t.className=t.className.replace(We(n)," ").trim()}Je.exports={add:qt,rm:Tt}});var ut=$((or,st)=>{"use strict";var Vt=Be(),P=Ke(),X=Qe(),A=document,k=A.documentElement;function Gt(t,n){var r=arguments.length;r===1&&Array.isArray(t)===!1&&(n=t,t=[]);var e,o,a,s,u,h,b,g,C,f,D,w=null,I,l=n||{};l.moves===void 0&&(l.moves=rt),l.accepts===void 0&&(l.accepts=rt),l.invalid===void 0&&(l.invalid=ht),l.containers===void 0&&(l.containers=t||[]),l.isContainer===void 0&&(l.isContainer=Lt),l.copy===void 0&&(l.copy=!1),l.copySortSource===void 0&&(l.copySortSource=!1),l.revertOnSpill===void 0&&(l.revertOnSpill=!1),l.removeOnSpill===void 0&&(l.removeOnSpill=!1),l.direction===void 0&&(l.direction="vertical"),l.ignoreInputTextSelection===void 0&&(l.ignoreInputTextSelection=!0),l.mirrorContainer===void 0&&(l.mirrorContainer=A.body);var p=Vt({containers:l.containers,start:vt,end:fe,cancel:pe,remove:me,destroy:ct,canMove:ft,dragging:!1});return l.removeOnSpill===!0&&p.on("over",mt).on("out",pt),ue(),p;function H(i){return p.containers.indexOf(i)!==-1||l.isContainer(i)}function ue(i){var c=i?"remove":"add";q(k,c,"mousedown",lt),q(k,c,"mouseup",K)}function L(i){var c=i?"remove":"add";q(k,c,"mousemove",dt)}function ce(i){var c=i?"remove":"add";P[c](k,"selectstart",le),P[c](k,"click",le)}function ct(){ue(!0),K({})}function le(i){I&&i.preventDefault()}function lt(i){h=i.clientX,b=i.clientY;var c=Ze(i)!==1||i.metaKey||i.ctrlKey;if(!c){var d=i.target,m=z(d);m&&(I=m,L(),i.type==="mousedown"&&(ot(d)?d.focus():i.preventDefault()))}}function dt(i){if(I){if(Ze(i)===0){K({});return}if(!(i.clientX!==void 0&&Math.abs(i.clientX-h)<=(l.slideFactorX||0)&&i.clientY!==void 0&&Math.abs(i.clientY-b)<=(l.slideFactorY||0))){if(l.ignoreInputTextSelection){var c=Y("clientX",i)||0,d=Y("clientY",i)||0,m=A.elementFromPoint(c,d);if(ot(m))return}var y=I;L(!0),ce(),fe(),de(y);var E=Ht(a);s=Y("pageX",i)-E.left,u=Y("pageY",i)-E.top,X.add(f||a,"gu-transit"),gt(),J(i)}}}function z(i){if(!(p.dragging&&e)&&!H(i)){for(var c=i;S(i)&&H(S(i))===!1;)if(l.invalid(i,c)||(i=S(i),!i))return;var d=S(i);if(d&&!l.invalid(i,c)){var m=l.moves(i,d,c,T(i));if(m)return{item:i,source:d}}}}function ft(i){return!!z(i)}function vt(i){var c=z(i);c&&de(c)}function de(i){Et(i.item,i.source)&&(f=i.item.cloneNode(!0),p.emit("cloned",f,i.item,"copy")),o=i.source,a=i.item,g=C=T(i.item),p.dragging=!0,p.emit("drag",a,o)}function ht(){return!1}function fe(){if(p.dragging){var i=f||a;he(i,S(i))}}function ve(){I=!1,L(!0),ce(!0)}function K(i){if(ve(),!!p.dragging){var c=f||a,d=Y("clientX",i)||0,m=Y("clientY",i)||0,y=tt(e,d,m),E=ge(y,d,m);E&&(f&&l.copySortSource||!f||E!==o)?he(c,E):l.removeOnSpill?me():pe()}}function he(i,c){var d=S(i);f&&l.copySortSource&&c===o&&d.removeChild(a),W(c)?p.emit("cancel",i,o,o):p.emit("drop",i,c,o,C),U()}function me(){if(p.dragging){var i=f||a,c=S(i);c&&c.removeChild(i),p.emit(f?"cancel":"remove",i,c,o),U()}}function pe(i){if(p.dragging){var c=arguments.length>0?i:l.revertOnSpill,d=f||a,m=S(d),y=W(m);y===!1&&c&&(f?m&&m.removeChild(f):o.insertBefore(d,g)),y||c?p.emit("cancel",d,o,o):p.emit("drop",d,m,o,C),U()}}function U(){var i=f||a;ve(),bt(),i&&X.rm(i,"gu-transit"),D&&clearTimeout(D),p.dragging=!1,w&&p.emit("out",i,w,o),p.emit("dragend",i),o=a=f=g=C=D=w=null}function W(i,c){var d;return c!==void 0?d=c:e?d=C:d=T(f||a),i===o&&d===g}function ge(i,c,d){for(var m=i;m&&!y();)m=S(m);return m;function y(){var E=H(m);if(E===!1)return!1;var B=be(m,i),M=Ee(m,B,c,d),R=W(m,M);return R?!0:l.accepts(a,m,o,M)}}function J(i){if(!e)return;i.preventDefault();var c=Y("clientX",i)||0,d=Y("clientY",i)||0,m=c-s,y=d-u;e.style.left=m+"px",e.style.top=y+"px";var E=f||a,B=tt(e,c,d),M=ge(B,c,d),R=M!==null&&M!==w;(R||M===null)&&(wt(),w=M,Ct());var x=S(E);if(M===o&&f&&!l.copySortSource){x&&x.removeChild(E);return}var O,F=be(M,B);if(F!==null)O=Ee(M,F,c,d);else if(l.revertOnSpill===!0&&!f)O=g,M=o;else{f&&x&&x.removeChild(E);return}(O===null&&R||O!==E&&O!==T(E))&&(C=O,M.insertBefore(E,O),p.emit("shadow",E,M,o));function N(Mt){p.emit(Mt,E,w,o)}function Ct(){R&&N("over")}function wt(){w&&N("out")}}function mt(i){X.rm(i,"gu-hide")}function pt(i){p.dragging&&X.add(i,"gu-hide")}function gt(){if(!e){var i=a.getBoundingClientRect();e=a.cloneNode(!0),e.style.width=nt(i)+"px",e.style.height=it(i)+"px",X.rm(e,"gu-transit"),X.add(e,"gu-mirror"),l.mirrorContainer.appendChild(e),q(k,"add","mousemove",J),X.add(l.mirrorContainer,"gu-unselectable"),p.emit("cloned",e,a,"mirror")}}function bt(){e&&(X.rm(l.mirrorContainer,"gu-unselectable"),q(k,"remove","mousemove",J),S(e).removeChild(e),e=null)}function be(i,c){for(var d=c;d!==i&&S(d)!==i;)d=S(d);return d===k?null:d}function Ee(i,c,d,m){var y=l.direction==="horizontal",E=c!==i?M():B();return E;function B(){var x=i.children.length,O,F,N;for(O=0;O<x;O++)if(F=i.children[O],N=F.getBoundingClientRect(),y&&N.left+N.width/2>d||!y&&N.top+N.height/2>m)return F;return null}function M(){var x=c.getBoundingClientRect();return R(y?d>x.left+nt(x)/2:m>x.top+it(x)/2)}function R(x){return x?T(c):c}}function Et(i,c){return typeof l.copy=="boolean"?l.copy:l.copy(i,c)}}function q(t,n,r,e){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},a={mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"},s={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"};global.navigator.pointerEnabled?P[n](t,a[r],e):global.navigator.msPointerEnabled?P[n](t,s[r],e):(P[n](t,o[r],e),P[n](t,r,e))}function Ze(t){if(t.touches!==void 0)return t.touches.length;if(t.which!==void 0&&t.which!==0)return t.which;if(t.buttons!==void 0)return t.buttons;var n=t.button;if(n!==void 0)return n&1?1:n&2?3:n&4?2:0}function Ht(t){var n=t.getBoundingClientRect();return{left:n.left+et("scrollLeft","pageXOffset"),top:n.top+et("scrollTop","pageYOffset")}}function et(t,n){return typeof global[n]<"u"?global[n]:k.clientHeight?k[t]:A.body[t]}function tt(t,n,r){t=t||{};var e=t.className||"",o;return t.className+=" gu-hide",o=A.elementFromPoint(n,r),t.className=e,o}function Lt(){return!1}function rt(){return!0}function nt(t){return t.width||t.right-t.left}function it(t){return t.height||t.bottom-t.top}function S(t){return t.parentNode===A?null:t.parentNode}function ot(t){return t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.tagName==="SELECT"||at(t)}function at(t){return!t||t.contentEditable==="false"?!1:t.contentEditable==="true"?!0:at(S(t))}function T(t){return t.nextElementSibling||n();function n(){var r=t;do r=r.nextSibling;while(r&&r.nodeType!==1);return r}}function zt(t){return t.targetTouches&&t.targetTouches.length?t.targetTouches[0]:t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t}function Y(t,n){var r=zt(n),e={pageX:"clientX",pageY:"clientY"};return t in e&&!(t in r)&&e[t]in r&&(t=e[t]),r[t]}st.exports=Gt});var se=yt(ut(),1),ie=class{constructor(n,r,e){this.name=n,this.drake=r,this.options=e,this.initEvents=!1}},v=function(t){return t.Cancel="cancel",t.Cloned="cloned",t.Drag="drag",t.DragEnd="dragend",t.Drop="drop",t.Out="out",t.Over="over",t.Remove="remove",t.Shadow="shadow",t.DropModel="dropModel",t.RemoveModel="removeModel",t}(v||{}),Kt=Object.keys(v).map(t=>v[t]),Ut=se.default||se,V=class{constructor(n=Ut){this.build=n}},j=(t,n,r)=>e=>e.pipe(ee(({event:o,name:a})=>o===t&&(n===void 0||a===n)),Ce(({name:o,args:a})=>r(o,a))),Wt=(t,[n,r,e])=>({name:t,el:n,container:r,source:e}),oe=(()=>{class t{constructor(r){this.drakeFactory=r,this.groups={},this.dispatch$=new Z,this.elContainerSource=e=>o=>this.dispatch$.pipe(j(e,o,Wt)),this.cancel=this.elContainerSource(v.Cancel),this.remove=this.elContainerSource(v.Remove),this.shadow=this.elContainerSource(v.Shadow),this.over=this.elContainerSource(v.Over),this.out=this.elContainerSource(v.Out),this.drag=e=>this.dispatch$.pipe(j(v.Drag,e,(o,[a,s])=>({name:o,el:a,source:s}))),this.dragend=e=>this.dispatch$.pipe(j(v.DragEnd,e,(o,[a])=>({name:o,el:a}))),this.drop=e=>this.dispatch$.pipe(j(v.Drop,e,(o,[a,s,u,h])=>({name:o,el:a,target:s,source:u,sibling:h}))),this.cloned=e=>this.dispatch$.pipe(j(v.Cloned,e,(o,[a,s,u])=>({name:o,clone:a,original:s,cloneType:u}))),this.dropModel=e=>this.dispatch$.pipe(j(v.DropModel,e,(o,[a,s,u,h,b,g,C,f,D])=>({name:o,el:a,target:s,source:u,sibling:h,item:b,sourceModel:g,targetModel:C,sourceIndex:f,targetIndex:D}))),this.removeModel=e=>this.dispatch$.pipe(j(v.RemoveModel,e,(o,[a,s,u,h,b,g])=>({name:o,el:a,container:s,source:u,item:h,sourceModel:b,sourceIndex:g}))),(this.drakeFactory===null||this.drakeFactory===void 0)&&(this.drakeFactory=new V)}add(r){if(this.find(r.name))throw new Error('Group named: "'+r.name+'" already exists.');return this.groups[r.name]=r,this.handleModels(r),this.setupEvents(r),r}find(r){return this.groups[r]}destroy(r){let e=this.find(r);e&&(e.drake&&e.drake.destroy(),delete this.groups[r])}createGroup(r,e){return this.add(new ie(r,this.drakeFactory.build([],e),e))}handleModels({name:r,drake:e,options:o}){let a,s,u;e.on("remove",(h,b,g)=>{if(!e.models)return;let C=e.models[e.containers.indexOf(g)];C=C.slice(0);let f=C.splice(s,1)[0];this.dispatch$.next({event:v.RemoveModel,name:r,args:[h,b,g,f,C,s]})}),e.on("drag",(h,b)=>{e.models&&(a=h,s=this.domIndexOf(h,b))}),e.on("drop",(h,b,g,C)=>{if(!e.models||!b)return;u=this.domIndexOf(h,b);let f=e.models[e.containers.indexOf(g)],D=e.models[e.containers.indexOf(b)],w;if(b===g)f=f.slice(0),w=f.splice(s,1)[0],f.splice(u,0,w),D=f;else{let I=a!==h;if(w=f[s],I){if(!o.copyItem)throw new Error("If you have enabled `copy` on a group, you must provide a `copyItem` function.");w=o.copyItem(w)}if(I||(f=f.slice(0),f.splice(s,1)),D=D.slice(0),D.splice(u,0,w),I)try{b.removeChild(h)}catch{}}this.dispatch$.next({event:v.DropModel,name:r,args:[h,b,g,C,w,f,D,s,u]})})}setupEvents(r){if(r.initEvents)return;r.initEvents=!0;let e=r.name,o=this,a=s=>{switch(s){case v.Drag:r.drake.on(s,(...u)=>{this.dispatch$.next({event:s,name:e,args:u})});break;case v.Drop:r.drake.on(s,(...u)=>{this.dispatch$.next({event:s,name:e,args:u})});break;case v.DragEnd:r.drake.on(s,(...u)=>{this.dispatch$.next({event:s,name:e,args:u})});break;case v.Cancel:case v.Remove:case v.Shadow:case v.Over:case v.Out:r.drake.on(s,(...u)=>{this.dispatch$.next({event:s,name:e,args:u})});break;case v.Cloned:r.drake.on(s,(...u)=>{this.dispatch$.next({event:s,name:e,args:u})});break;case v.DropModel:r.drake.on(s,(...u)=>{this.dispatch$.next({event:s,name:e,args:u})});break;case v.RemoveModel:r.drake.on(s,(...u)=>{this.dispatch$.next({event:s,name:e,args:u})});break;default:break}};Kt.forEach(a)}domIndexOf(r,e){if(e)return Array.prototype.indexOf.call(e.children,r)}static{this.\u0275fac=function(e){return new(e||t)(ye(V,8))}}static{this.\u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),pr=(()=>{class t{get container(){return this.el&&this.el.nativeElement}constructor(r,e){this.el=r,this.dragulaService=e,this.dragulaModelChange=new xe}ngOnChanges(r){if(r&&r.dragula){let{previousValue:e,currentValue:o,firstChange:a}=r.dragula,s=!!e,u=!!o;s&&this.teardown(e),u&&this.setup()}else if(r&&r.dragulaModel){let{previousValue:e,currentValue:o,firstChange:a}=r.dragulaModel,s=this.group?.drake;if(this.dragula&&s){s.models=s.models||[];let u=s.models.indexOf(e);u!==-1?(s.models.splice(u,1),o&&s.models.splice(u,0,o)):o&&s.models.push(o)}}}setup(){let r=o=>{this.dragulaModel&&(o.drake?.models?o.drake?.models?.push(this.dragulaModel):o.drake&&(o.drake.models=[this.dragulaModel]))};if(!this.dragula)return;let e=this.dragulaService.find(this.dragula);if(!e){let o={};e=this.dragulaService.createGroup(this.dragula,o)}r(e),e.drake?.containers.push(this.container),this.subscribe(this.dragula),this.group=e}subscribe(r){this.subs=new Q,this.subs.add(this.dragulaService.dropModel(r).subscribe(({source:e,target:o,sourceModel:a,targetModel:s})=>{e===this.el.nativeElement?this.dragulaModelChange.emit(a):o===this.el.nativeElement&&this.dragulaModelChange.emit(s)})),this.subs.add(this.dragulaService.removeModel(r).subscribe(({source:e,sourceModel:o})=>{e===this.el.nativeElement&&this.dragulaModelChange.emit(o)}))}teardown(r){this.subs&&this.subs.unsubscribe();let e=this.dragulaService.find(r);if(e){let o=e.drake?.containers.indexOf(this.el.nativeElement);if(o!==-1&&e.drake?.containers.splice(o,1),this.dragulaModel&&e.drake&&e.drake.models){let a=e.drake.models.indexOf(this.dragulaModel);a!==-1&&e.drake.models.splice(a,1)}}}ngOnDestroy(){this.dragula&&this.teardown(this.dragula)}static{this.\u0275fac=function(e){return new(e||t)(te(Oe),te(oe))}}static{this.\u0275dir=ke({type:t,selectors:[["","dragula",""]],inputs:{dragula:"dragula",dragulaModel:"dragulaModel"},outputs:{dragulaModelChange:"dragulaModelChange"},standalone:!1,features:[Se]})}}return t})(),gr=(()=>{class t{static forRoot(){return{ngModule:t,providers:[oe]}}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275mod=De({type:t})}static{this.\u0275inj=Me({providers:[oe]})}}return t})(),br=new V((t,n)=>new ae(t,n)),ae=class{constructor(n=[],r={},e){this.containers=n,this.options=r,this.models=e,this.emitter$=new Z,this.subs=new Q,this.dragging=!1}on(n,r){this.subs.add(this.emitter$.pipe(ee(({eventType:e})=>e===n)).subscribe(({eventType:e,args:o})=>{if(e===v.Drag){let a=Array.from(o),s=a[0],u=a[1];r(s,u);return}if(e===v.Drop){let a=Array.from(o),s=a[0],u=a[1],h=a[2],b=a[3];r(s,u,h,b);return}if(e===v.Remove){let a=Array.from(o),s=a[0],u=a[1],h=a[2];r(s,u,h);return}r(o)}))}start(n){this.dragging=!0}end(){this.dragging=!1}cancel(n){this.dragging=!1}canMove(n){return this.options.accepts?this.options.accepts(n):!1}remove(){this.dragging=!1}destroy(){this.subs.unsubscribe()}emit(n,...r){this.emitter$.next({eventType:n,args:r})}};export{oe as a,pr as b,gr as c};
