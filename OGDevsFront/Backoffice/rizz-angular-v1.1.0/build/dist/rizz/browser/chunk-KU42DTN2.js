import{r as w}from"./chunk-TVEHL5PL.js";import{K as m,La as b,Mb as I,P as _,ea as g,f as l,g as a,ga as h,gc as $,la as p,n as u,ra as f,xb as x}from"./chunk-PCQXBAHX.js";var H={asc:"desc",desc:"","":"asc"},N=(()=>{class e{constructor(){this.sortable="",this.direction="",this.sort=new b}rotate(){this.direction=H[this.direction],this.sort.emit({column:this.sortable,direction:this.direction})}static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275dir=x({type:e,selectors:[["th","sortable",""]],hostVars:4,hostBindings:function(s,r){s&1&&$("click",function(){return r.rotate()}),s&2&&I("asc",r.direction==="asc")("desc",r.direction==="desc")},inputs:{sortable:"sortable",direction:"direction"},outputs:{sort:"sort"}})}}return e})();function O(e,i,t){if(!i)return!0;i=i.toLowerCase();for(let s of t)if(e[s]?.toString().toLowerCase()?.includes(i))return!0;return!1}function T(e,i){return e<i?-1:e>i?1:0}var A=(()=>{class e{constructor(){this._loading$=new a(!0),this._search$=new l,this._items$=new a([]),this._total$=new a(0),this.items=[],this._state={page:1,pageSize:10,searchTerm:"",startIndex:1,endIndex:10,sortColumn:"",sortDirection:""},this.pipe=f(w),this._search$.pipe(h(()=>this._loading$.next(!0)),m(200),g(()=>this._search()),_(0),h(()=>this._loading$.next(!1))).subscribe(t=>{this._items$.next(t.items),this._total$.next(t.total)}),this._search$.next()}get items$(){return this._items$.asObservable()}get total$(){return this._total$.asObservable()}get loading$(){return this._loading$.asObservable()}get page(){return this._state.page}get startIndex(){return this._state.startIndex}get endIndex(){return this._state.endIndex}get pageSize(){return this._state.pageSize}get searchTerm(){return this._state.searchTerm}get sortColumn(){return this._state.sortColumn}get sortDirection(){return this._state.sortDirection}set page(t){this._set({page:t})}set startIndex(t){this._set({startIndex:t})}set endIndex(t){this._set({endIndex:t})}set pageSize(t){this._set({pageSize:t})}set searchTerm(t){this._set({searchTerm:t})}set sortColumn(t){this._set({sortColumn:t})}set sortDirection(t){this._set({sortDirection:t})}setItems(t,s){this.items=t,this._set({pageSize:s}),this._set({endIndex:s})}_set(t){Object.assign(this._state,t),this._search$.next()}_search(){let{pageSize:t,page:s,searchTerm:r,sortColumn:n,sortDirection:S}=this._state,v=Object.keys(this.items[0]),o=this.items.filter(c=>O(c,r,v));n&&(o=[...o].sort((c,C)=>{let d=T(c[n],C[n]);return S==="asc"?d:-d}));let D=o.length;this.startIndex=(s-1)*t,this.endIndex=this.startIndex+t;let j=o.slice(this.startIndex,this.endIndex);return this._loading$.next(!1),u({items:j,total:D})}static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();export{N as a,A as b};
