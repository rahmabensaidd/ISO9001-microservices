<div class="stats-container">
  <!-- Loading Spinner -->
  <div class="loading" *ngIf="!dataLoaded">
    <div class="spinner"></div>
    <p>Loading statistics...</p>
  </div>

  <!-- Statistics Section -->
  <div class="stats-section" *ngIf="dataLoaded">
    <div class="stat-card">
      <h6>Total Projects</h6>
      <p>{{ totalProjects }}</p>
    </div>
    <div class="stat-card">
      <h6>Avg Phases per Project</h6>
      <p>{{ avgPhases | number: '1.1-1' }}</p>
    </div>
    <div class="stat-card">
      <h6>Avg Project Duration (days)</h6>
      <p>{{ avgDuration | number: '1.0-0' }}</p>
    </div>
    <div class="stat-card">
      <h6>Overdue Operations</h6>
      <p>{{ overdueOperations }}</p>
    </div>
    <div class="stat-card">
      <h6>Total Bugs</h6>
      <p>{{ totalBugs }}</p>
    </div>
  </div>

  <!-- Charts Section -->
  <div class="charts-section" *ngIf="dataLoaded">
    <div class="chart-card">
      <h6>Project Completion</h6>
      <canvas baseChart [data]="projectDonutChartConfig.data" [type]="projectDonutChartConfig.type" [options]="projectDonutChartConfig.options" aria-label="Project Completion Chart"></canvas>
    </div>
    <div class="chart-card">
      <h6>Phase Completion</h6>
      <canvas baseChart [data]="phaseDonutChartConfig.data" [type]="phaseDonutChartConfig.type" [options]="phaseDonutChartConfig.options" aria-label="Phase Completion Chart"></canvas>
    </div>
    <div class="chart-card">
      <h6>Task Completion</h6>
      <canvas baseChart [data]="taskDonutChartConfig.data" [type]="taskDonutChartConfig.type" [options]="taskDonutChartConfig.options" aria-label="Task Completion Chart"></canvas>
    </div>
    <div class="chart-card">
      <h6>Projects by Type</h6>
      <canvas baseChart [data]="barChartType.data" [type]="barChartType.type" [options]="barChartType.options" aria-label="Projects by Type Chart"></canvas>
    </div>
    <div class="chart-card">
      <h6>Projects by Responsible</h6>
      <canvas baseChart [data]="barChartResponsible.data" [type]="barChartResponsible.type" [options]="barChartResponsible.options" aria-label="Projects by Responsible Chart"></canvas>
    </div>
    <div class="chart-card">
      <h6>Bugs by Status</h6>
      <canvas baseChart [data]="barChartBugs.data" [type]="barChartBugs.type" [options]="barChartBugs.options" aria-label="Bugs by Status Chart"></canvas>
      <p *ngIf="totalBugs === 0" class="no-data">No bugs available</p>
    </div>
    <div class="chart-card">
      <h6>Bugs by Project</h6>
      <canvas baseChart [data]="barChartBugsByProject.data" [type]="barChartBugsByProject.type" [options]="barChartBugsByProject.options" aria-label="Bugs by Project Chart"></canvas>
      <p *ngIf="totalBugs === 0" class="no-data">No bugs available</p>
    </div>
  </div>
</div>
